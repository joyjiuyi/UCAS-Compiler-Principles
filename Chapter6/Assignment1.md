# 编译原理 第 6 章 作业 1

## 1
为下列表达式构建 DAG，且指出它们的每个子表达式的值编码。（参考图6-4 的SDD）

```
( (x+y) - ( (x+y) * (x-y) ) ) + ( (x+y) * (x-y) )
```

### 解

DAG 如下：

<img src="./1-1-1.svg" style="width:12em;">

每个子表达式的编码：

|#|运算符|||子表达式|
|:-:|:-:|:-:|:-:|:-:|
|1|`id`|`x`||`x`|
|2|`id`|`y`||`y`|
|3|`+`|`1`|`2`|`(x+y)`|
|4|`-`|`1`|`2`|`(x-y)`|
|5|`*`|`3`|`4`|`( (x+y) * (x-y) )`|
|6|`-`|`3`|`5`|`( (x+y) - ( (x+y) * (x-y) ) )`|
|7|`+`|`6`|`5`|`( (x+y) - ( (x+y) * (x-y) ) ) + ( (x+y) * (x-y) ) )`|


## 2
将语句 `a = - ( b + c )` 翻译成：

(1) 抽象语法树  
(2) 四元式序列  
(3) 三元式序列  
(4) 间接三元式序列

### 解

(1) 抽象语法树

<img src="./1-2-2.svg" style="width:12em;">

(2) 四元式序列

| # | op | arg1 | arg2 | result |
|:-:|:-:|:-:|:-:|:-:|
| `0`  | `+`  | `b`  | `c`  | `t1`  |
| `1`  | `minus` | `t1`  |   | `t2`   |
| `2`  | `=` | `t2`  |   | `a`   |

(3) 三元式序列

| # | op | arg1 | arg2 |
|:-:|:-:|:-:|:-:|
| `0`  | `+`  | `b`  | `c`  |
| `1`  | `minus` | `(0)`  |  |
| `2`  | `=` | `a` | `(1)` |

(4) 间接三元式序列

| # | instruction  | 
|:-:|:-:|
| `100`  | `(0)`  |
| `101`  | `(1)` |
| `102`  | `(2)` |

| # | op | arg1 | arg2 |
|:-:|:-:|:-:|:-:|
| `0`  | `+`  | `b`  | `c`  |
| `1`  | `minus` | `(0)`  |  |
| `2`  | `=` | `a` | `(1)` |